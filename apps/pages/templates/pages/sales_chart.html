{% extends "layouts/base.html" %} {% block content %} {% load static %}
<script src="{{ bokeh_js }}"></script>
{% if bokeh_css %}
<link rel="stylesheet" href="{{ bokeh_css }}" />
{% endif %}
<div class="mt-30">
  <div class="mt-10 flex justify-center">
    <div class="stats shadow">
      <a href="{% url 'clients:index' %}">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <svg
              onclick="window.location.href='/clients'"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
              class="w-[50px] h-[50px]"
            >
              <title />
              <g data-name="Layer 2" id="Layer_2">
                <path
                  d="M15,9a3,3,0,0,0-.78-2A3,3,0,1,0,9.78,7,3,3,0,0,0,9,9v3h6Z"
                />
                <path
                  d="M8,19a3,3,0,0,0-.78-2,3,3,0,1,0-4.44,0A3,3,0,0,0,2,19v3H8Z"
                />
                <path
                  d="M22,19a3,3,0,0,0-.78-2,3,3,0,1,0-4.44,0A3,3,0,0,0,16,19v3h6Z"
                />
                <polygon
                  points="15 16 13 16 13 13 11 13 11 16 9 16 9 18 15 18 15 16"
                />
              </g>
            </svg>
          </div>
          <div class="stat-title">客戶</div>
          <div class="stat-value">{{clients_num}}位</div>
          <div class="stat-desc">
            {% if clients_month_num %}↗︎{% endif %} {{clients_month_num}}人
          </div>
        </div>
      </a>
      <a href="{% url 'products:index' %}">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <svg
              onclick="window.location.href='/products'"
              class="w-[50px] h-[50px]"
              enable-background="new 0 0 100 100"
              height="100px"
              id="Calque_3"
              version="1.1"
              viewBox="0 0 100 100"
              width="100px"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g>
                <path
                  d="M81.32,58.89c-0.19,0.17-0.851,0.591-2.88,1.03c-0.16-0.41-0.25-0.84-0.25-1.3c0-0.25,0.02-0.48,0.069-0.71   C80.24,58.26,81.07,58.68,81.32,58.89z"
                />
                <path
                  d="M66.95,57.39l-1.92,3.28c-4.931-0.28-7.141-1.07-7.58-1.479C57.99,58.64,61.08,57.67,66.95,57.39z"
                />
                <path
                  d="M85.3,58.62c0,1.96-1.6,3.55-3.56,3.55c-0.96,0-1.84-0.39-2.48-1.01c3.13-0.75,3.51-1.65,3.5-2.29   c-0.01-0.66-0.45-1.601-3.939-2.271c0.64-0.93,1.71-1.54,2.92-1.54C83.7,55.06,85.3,56.66,85.3,58.62z"
                />
                <path
                  d="M59.32,75.97l-4.79,8.21c-0.521-0.77-0.58-1.779-0.09-2.609l3.68-6.301L59.32,75.97z"
                />
                <rect
                  height="1.448"
                  transform="matrix(0.5045 -0.8634 0.8634 0.5045 -41.0698 90.9252)"
                  width="9.752"
                  x="53.809"
                  y="80.521"
                />
                <polygon
                  points="64.21,78.83 59.29,87.25 58.05,86.52 62.97,78.1  "
                />
                <polygon
                  points="66.66,80.25 61.74,88.67 60.5,87.95 65.42,79.53  "
                />
                <polygon
                  points="69.11,81.68 64.19,90.1 62.94,89.38 67.86,80.96  "
                />
                <polygon
                  points="71.55,83.11 66.63,91.53 65.39,90.81 70.31,82.38  "
                />
                <rect
                  height="1.447"
                  transform="matrix(0.5045 -0.8634 0.8634 0.5045 -41.1746 105.023)"
                  width="9.752"
                  x="66.039"
                  y="87.662"
                />
                <path
                  d="M89.71,71.53l-2.43,19c-0.08,0.649-0.41,1.22-0.931,1.63c-0.52,0.399-1.17,0.58-1.81,0.49L77.87,91.8L89.71,71.53z"
                />
                <rect
                  height="1.447"
                  transform="matrix(0.5045 -0.8634 0.8634 0.5045 -41.1949 107.8469)"
                  x="68.489"
                  y="89.091"
                />
                <path
                  d="M78.85,87.37l-3.68,6.3c-0.49,0.83-1.4,1.28-2.32,1.21l4.801-8.21L78.85,87.37z"
                />
                <path
                  d="M91.22,65.99c-0.05,0.22-0.14,0.439-0.26,0.64L79.55,86.17L58.82,74.06L68.6,57.33c0.25-0.01,0.511-0.01,0.771-0.021   c2.72-0.029,5.35,0.101,7.51,0.391c-0.05,0.3-0.08,0.6-0.08,0.92c0,1.75,0.91,3.29,2.29,4.17h0.01c0.761,0.49,1.67,0.77,2.641,0.77   c2.729,0,4.95-2.22,4.95-4.939c0-2.73-2.221-4.95-4.95-4.95c-1.91,0-3.57,1.09-4.391,2.69c-2.26-0.32-5.05-0.471-7.93-0.44   l0.811-1.39c0.14-0.23,0.3-0.431,0.5-0.61c0.319-0.28,0.72-0.479,1.149-0.56l0.09-0.021l7.37-3.64c2.88-1.42,5.641-1.51,7.771-0.27   c2.13,1.25,3.399,3.7,3.58,6.9L91.22,65.99z"
                />
                <path
                  d="M16.11,12.32L8.9,19.53H8.71V9.94c0-0.03,0.01-0.06,0.01-0.09c0.01-0.06,0.01-0.12,0.02-0.18c0-0.04,0.01-0.08,0.01-0.11   C8.76,9.5,8.77,9.45,8.78,9.39C8.79,9.35,8.79,9.32,8.8,9.28c0.01-0.06,0.02-0.11,0.03-0.17C8.84,9.08,8.85,9.04,8.86,9   C8.87,8.95,8.89,8.89,8.9,8.84C8.91,8.8,8.92,8.77,8.94,8.73c0.01-0.06,0.03-0.11,0.05-0.17C9,8.53,9.01,8.5,9.03,8.47   c0.02-0.08,0.06-0.16,0.09-0.24c0-0.01,0.01-0.02,0.01-0.03l0.12-0.24C9.26,7.93,9.28,7.9,9.29,7.87c0.03-0.05,0.06-0.1,0.09-0.16   c0.01-0.03,0.04-0.06,0.05-0.1c0.03-0.04,0.06-0.09,0.09-0.14c0.02-0.03,0.04-0.06,0.07-0.1c0.03-0.04,0.06-0.08,0.09-0.13   C9.7,7.21,9.72,7.18,9.75,7.15c0.03-0.05,0.07-0.09,0.1-0.13C9.88,6.99,9.9,6.96,9.92,6.93C9.96,6.88,10,6.84,10.04,6.8   c0.02-0.03,0.05-0.06,0.07-0.08c0.06-0.06,0.11-0.12,0.17-0.18c0.01,0,0.02-0.01,0.03-0.02L16.11,12.32z"
                />
                <path
                  d="M69.36,10.23v9.3h-0.54l-7.21-7.21l5.97-5.97c0,0.01,0.01,0.02,0.02,0.03c0.03,0.02,0.051,0.04,0.08,0.07   c0.051,0.04,0.09,0.08,0.141,0.13c0.029,0.02,0.06,0.05,0.08,0.08c0.04,0.04,0.08,0.09,0.13,0.13c0.02,0.03,0.05,0.06,0.069,0.09   c0.04,0.04,0.08,0.09,0.12,0.14c0.021,0.03,0.05,0.06,0.07,0.09c0.04,0.05,0.07,0.1,0.11,0.14c0.02,0.04,0.04,0.07,0.06,0.1   c0.04,0.05,0.08,0.11,0.11,0.16c0.02,0.03,0.04,0.06,0.05,0.08c0.05,0.08,0.09,0.15,0.13,0.23c0.01,0.01,0.01,0.02,0.02,0.03   c0.04,0.08,0.091,0.17,0.131,0.26c0.01,0.03,0.02,0.05,0.029,0.08c0.03,0.06,0.061,0.13,0.08,0.19c0.01,0.03,0.03,0.07,0.04,0.1   c0.021,0.06,0.04,0.12,0.061,0.17l0.029,0.12c0.021,0.05,0.04,0.11,0.051,0.17c0.01,0.04,0.02,0.07,0.029,0.11   c0.011,0.06,0.03,0.12,0.04,0.18c0.01,0.03,0.021,0.07,0.021,0.11l0.029,0.18c0,0.04,0.011,0.08,0.011,0.12   c0.01,0.06,0.02,0.13,0.02,0.19c0.01,0.04,0.01,0.07,0.01,0.1C69.36,10.03,69.36,10.13,69.36,10.23z"
                />
                <path
                  d="M68.25,20.92H9.47l-0.76,0.77v49.24c0,2.82,2.29,5.11,5.11,5.11v0.01h42.23l0.87-1.479l7.33-12.551   c-3.98-0.279-8.22-1-8.24-2.81c-0.01-1.03,1.221-1.78,3.86-2.37c2.09-0.46,4.89-0.77,7.91-0.88l1.25-2.14   c0.1-0.17,0.21-0.33,0.33-0.471V22.04L68.25,20.92z M52.78,34.12v5.44c0,7.58-6.17,13.75-13.75,13.75   c-7.58,0-13.74-6.169-13.74-13.75v-5.44c-2.05-0.33-3.62-2.11-3.62-4.25c0-2.38,1.94-4.31,4.31-4.31c2.38,0,4.32,1.93,4.32,4.31   c0,2.14-1.57,3.92-3.62,4.25v5.44c0,6.81,5.54,12.35,12.35,12.35c6.82,0,12.36-5.54,12.36-12.35v-5.44   c-1.03-0.16-1.93-0.69-2.58-1.45c-0.65-0.75-1.04-1.73-1.04-2.8c0-2.38,1.94-4.31,4.31-4.31c2.38,0,4.32,1.93,4.32,4.31   C56.4,32.01,54.83,33.79,52.78,34.12z"
                />
                <path
                  d="M10.86,19.53l7.22-7.21L11.45,5.7c0.13-0.07,0.25-0.13,0.38-0.19c0.63-0.26,1.3-0.4,1.99-0.4h50.42   c0.649,0,1.279,0.12,1.87,0.35c0,0,0,0,0,0.01c0.09,0.03,0.18,0.07,0.27,0.11l-6.74,6.74l7.21,7.21H10.86z"
                />
                <path
                  d="M55.01,29.87c0,1.61-1.319,2.92-2.93,2.92c-1.61,0-2.92-1.31-2.92-2.92c0-0.81,0.33-1.53,0.86-2.06   c0.52-0.53,1.26-0.86,2.06-0.86C53.69,26.95,55.01,28.26,55.01,29.87z"
                />
                <path
                  d="M28.9,29.87c0,1.61-1.31,2.92-2.92,2.92s-2.92-1.31-2.92-2.92c0-1.61,1.31-2.92,2.92-2.92S28.9,28.26,28.9,29.87z"
                />
              </g>
            </svg>
          </div>
          <div class="stat-title">商品</div>
          <div class="stat-value">{{products_num}}個</div>
          <div class="stat-desc">
            {% if products_month_num %}↗︎{% endif %} {{products_month_num}}個
          </div>
        </div>
      </a>
      <a href="{% url 'suppliers:index' %}">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <svg
              onclick="window.location.href='/suppliers'"
              class="w-[50px] h-[50px]"
              viewBox="0 0 64 64"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title />
              <g data-name="Layer 11" id="Layer_11">
                <path
                  d="M62,47a1,1,0,0,0,1-1V40a1,1,0,0,0-1-1H59.93L58,13.92A1,1,0,0,0,57,13H51a1,1,0,0,0-1,.92L48.07,39H45.93L44,13.92A1,1,0,0,0,43,13H37a1,1,0,0,0-1,.92L34.07,39H31V24h1a1,1,0,0,0,1-1V17a1,1,0,0,0-1-1H4a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1H5V39H2a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1H4V61H1v2H63V61H60V47ZM51.93,15h4.14l.16,2H51.77Zm-.31,4h4.76l1.54,20H50.08ZM37.93,15h4.14l.16,2H37.77Zm-.31,4h4.76l1.54,20H36.08ZM5,18H31v4H5Zm24,6V39H7V24ZM14,61H10V55h4Zm10,0H20V55h4Zm10,0H30V55h4Zm10,0H40V55h4Zm10,0H50V55h4Zm4,0H56V54a1,1,0,0,0-1-1H49a1,1,0,0,0-1,1v7H46V54a1,1,0,0,0-1-1H39a1,1,0,0,0-1,1v7H36V54a1,1,0,0,0-1-1H29a1,1,0,0,0-1,1v7H26V54a1,1,0,0,0-1-1H19a1,1,0,0,0-1,1v7H16V54a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v7H6V47H58ZM3,45V41H61v4Z"
                />
                <path
                  d="M10,36h6a1,1,0,0,0,1-1V27a1,1,0,0,0-1-1H10a1,1,0,0,0-1,1v8A1,1,0,0,0,10,36Zm1-8h4v6H11Z"
                />
                <path
                  d="M20,36h6a1,1,0,0,0,1-1V27a1,1,0,0,0-1-1H20a1,1,0,0,0-1,1v8A1,1,0,0,0,20,36Zm1-8h4v6H21Z"
                />
                <path
                  d="M38,10a1.43,1.43,0,0,1,.41-1L39,8.41A3.36,3.36,0,0,0,40,6a1.43,1.43,0,0,1,.41-1L41,4.41A3.36,3.36,0,0,0,42,2V1H40V2a1.43,1.43,0,0,1-.41,1L39,3.59A3.36,3.36,0,0,0,38,6a1.43,1.43,0,0,1-.41,1L37,7.59A3.36,3.36,0,0,0,36,10v1h2Z"
                />
                <path
                  d="M41,10v1h2V10a1.43,1.43,0,0,1,.41-1L44,8.41A3.36,3.36,0,0,0,45,6a1.43,1.43,0,0,1,.41-1L46,4.41A3.36,3.36,0,0,0,47,2V1H45V2a1.43,1.43,0,0,1-.41,1L44,3.59A3.36,3.36,0,0,0,43,6a1.43,1.43,0,0,1-.41,1L42,7.59A3.36,3.36,0,0,0,41,10Z"
                />
                <path
                  d="M52,10a1.43,1.43,0,0,1,.41-1L53,8.41A3.36,3.36,0,0,0,54,6a1.43,1.43,0,0,1,.41-1L55,4.41A3.36,3.36,0,0,0,56,2V1H54V2a1.43,1.43,0,0,1-.41,1L53,3.59A3.36,3.36,0,0,0,52,6a1.43,1.43,0,0,1-.41,1L51,7.59A3.36,3.36,0,0,0,50,10v1h2Z"
                />
                <path
                  d="M55,10v1h2V10a1.43,1.43,0,0,1,.41-1L58,8.41A3.36,3.36,0,0,0,59,6a1.43,1.43,0,0,1,.41-1L60,4.41A3.36,3.36,0,0,0,61,2V1H59V2a1.43,1.43,0,0,1-.41,1L58,3.59A3.36,3.36,0,0,0,57,6a1.43,1.43,0,0,1-.41,1L56,7.59A3.36,3.36,0,0,0,55,10Z"
                />
              </g>
            </svg>
          </div>
          <div class="stat-title">供應商</div>
          <div class="stat-value">{{suppliers_num}}個</div>
          <div class="stat-desc">
            {% if suppliers_month_num %}↗︎{% endif %} {{suppliers_month_num}}個
          </div>
        </div>
      </a>
      <a href="{% url 'inventory:index' %}">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <svg
              onclick="window.location.href='/inventory'"
              class="w-[50px] h-[50px]"
              height="768"
              version="1.1"
              viewBox="0 0 768 768"
              width="768"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title />
              <path
                d="M579.008 260.496l-45.008-162.992-262.992 74 41.984 162.992z"
                fill="#000"
              />
              <path
                d="M245.968 436.352l0.032 0.144 42.992-12.992-104-404h-177.984v56.992h128.768l90.72 365.76z"
                fill="#000"
              />
              <path
                d="M749.376 497.104l-5.376-22.608-274.336 76.32 21.2 66.528 270.128-78.688-9.984-42z"
                fill="#000"
              />
              <path
                d="M408.496 529.392l19.52-19.52-35.392-35.408-19.504 19.536c-11.344-7.52-24.016-13.12-37.568-16.64v-29.168h-62.816v29.168c-13.84 3.584-26.8 9.344-38.336 17.104l-18.72-18.736-35.392 35.392 19.040 19.040c-7.28 11.136-12.736 23.568-16.176 36.784h-29.152v62.784h29.152c3.52 13.552 9.12 26.256 16.656 37.616l-19.52 19.504 35.392 35.376 19.52-19.52c11.376 7.552 24.096 13.168 37.68 16.672v29.12h62.576v-29.12c13.28-3.408 25.712-8.912 36.896-16.176l20.288 20.272 35.392-35.36-19.984-20.016c7.808-11.6 13.6-24.64 17.152-38.544h29.12v-62.368h-29.12c-3.504-13.616-9.12-26.384-16.704-37.792zM304.16 649.824c-28.432 0-51.472-23.040-51.472-51.488 0-28.416 23.040-51.472 51.472-51.472 28.416 0 51.472 23.040 51.472 51.472 0 28.448-23.056 51.488-51.472 51.488z"
                fill="#000"
              />
              <path
                d="M342.848 442.256c63.344-11.248 95.648 32.448 95.648 32.448 0.112 0.112 0.224 0.224 0.336 0.336 0.48 0.512 0.864 0.992 1.312 1.488 6.352 7.84 10.944 19.44 10.944 19.44l2.672 8.384 307.248-84.864-44-163.008-394 108 19.84 77.776z"
                fill="#000"
              />
            </svg>
          </div>
          <div class="stat-title">庫存</div>
          <div class="stat-value">
            {% if inventory_num == None %}0件 {% else %}
            <p>{{inventory_num}}件</p>
            {% endif %}
          </div>
          <div class="stat-desc">
            {% if inventory_month_num %}↗︎{% endif %} {{inventory_month_num}}件
          </div>
        </div>
      </a>
    </div>
  </div>
  <div class="mt-10">
    <div class="grid grid-cols-3 gap-4 place-items-center">
      <div class="col-span-2">
        <div class="flex">
          <div>{{ div1 | safe }}</div>
        </div>
      </div>
      <div class="col-span-1 space-y-4">
        <div class="stats shadow">
          <a href="{% url 'orders:index'%}">
            <div class="stat place-items-center">
              <div class="stat-title">訂單</div>
              <div class="stat-value">{{orders_num}}件</div>
              <div class="stat-desc">
                進行中 {{orders_progress_num}} | 待處理 {{orders_pending_num}}
              </div>
            </div>
          </a>
          <a href="{% url 'sales_orders:index'%}">
            <div class="stat place-items-center">
              <div class="stat-title">銷貨單</div>
              <div class="stat-value text-secondary">
                {{sales_orders_num}}件
              </div>
              <div class="stat-desc text-secondary">
                進行中 {{sales_orders_progress_num}} | 待處理
                {{sales_orders_pending_num}}
              </div>
            </div>
          </a>
        </div>
        <div class="stats shadow">
          <a href="{% url 'purchase_orders:index'%}">
            <div class="stat place-items-center">
              <div class="stat-title">採購單</div>
              <div class="stat-value">{{purchase_orders_num}}件</div>
              <div class="stat-desc">
                進行中 {{purchase_orders_progress_num}} | 待處理
                {{purchase_orders_pending_num}}
              </div>
            </div>
          </a>
          <a href="{% url 'goods_receipts:index'%}">
            <div class="stat place-items-center">
              <div class="stat-title">進貨單</div>
              <div class="stat-value text-secondary">
                {{goods_receipts_num}}件
              </div>
              <div class="stat-desc text-secondary">
                進行中 {{goods_receipts_progress_num}} | 待處理
                {{goods_receipts_pending_num}}
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="overflow-x-auto">
    <table class="table table-zebra">
      <!-- head -->
      <thead>
        <tr>
          <th>VIP訂單客戶</th>
          <th>客戶名稱</th>
          <th>購買數量</th>
          <th>總金額</th>
        </tr>
      </thead>
      <tbody>
        {% for client in vip_clients %}
        <tr>
          <th>{{ forloop.counter }}</th>
          <td>{{ client.name }}</td>
          <td>{{ client.total_quantity }}</td>
          <td>${{ client.total_amount }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4">目前沒有 VIP 客戶資料。</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="overflow-x-auto"></div>

  <div>{{ script1 | safe }} {{ script2 | safe }} {{ script4 | safe }}</div>
</div>
{% endblock %}
